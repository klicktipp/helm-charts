# -- Override for the Helm chart name.
nameOverride: ""

# -- Override for the fully-qualified release name.
fullnameOverride: ""

image:
  # -- RabbitMQ container image registry (e.g. `docker.io`, `ghcr.io`, ECR registry host). Empty means no registry prefix.
  registry: ""
  # -- RabbitMQ container image repository.
  repository: rabbitmq
  # -- RabbitMQ container image tag.
  tag: 4.2-management-alpine

pdb:
  # -- Create a PodDisruptionBudget for RabbitMQ pods.
  enabled: false
  # -- `maxUnavailable` for PodDisruptionBudget (int or percentage string).
  maxUnavailable: 1

ingress:
  # -- Create an Ingress for RabbitMQ management UI.
  enabled: false
  # -- IngressClass name.
  className: ""
  # -- Additional annotations for Ingress.
  annotations: {}
  # -- Ingress host/path rules.
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  # -- TLS configuration entries for Ingress.
  tls: []

monitoring:
  # -- Enable monitoring resources created by this chart.
  enabled: false
  serviceMonitor:
    # -- Create a ServiceMonitor (requires Prometheus Operator CRDs).
    enabled: false

# -- Pod termination grace period in seconds for RabbitMQ pods.
terminationGracePeriodSeconds: 600

# -- Additional raw Kubernetes objects rendered as-is via `tpl`.
extraObjects: []

rabbitmq:
  cluster:
    # -- Create the `RabbitmqCluster` resource.
    enabled: true
    # -- Name of the `RabbitmqCluster` resource. If empty, chart fullname is used.
    name: ""
    # -- Number of RabbitMQ replicas.
    replicas: 1
    # -- Delay in seconds before RabbitMQ node starts.
    delayStartSeconds: 10

    persistence:
      # -- Enable persistent volume claim for RabbitMQ data.
      enabled: false
      # -- Persistent volume size.
      storage: 10Gi
      # -- StorageClass name for persistence (empty = cluster default).
      storageClassName: ""

    # -- Resource requests/limits for RabbitMQ container.
    resources: {}
    # -- Predefined RabbitMQ config profile (`PROD`, `STAGING`, `DEV`) or `null`.
    configProfile: null
    # -- Additional RabbitMQ config appended to generated config.
    extraConfig: ""

    # -- Default RabbitMQ plugins to enable.
    additionalPlugins:
      - rabbitmq_management
      - rabbitmq_prometheus
      - rabbitmq_peer_discovery_k8s

    # -- Extra RabbitMQ plugins to enable in addition to defaults.
    extraPlugins: []
    # -- Raw override merged into RabbitmqCluster spec.
    override: {}
    # -- Pod affinity/anti-affinity for RabbitMQ pods.
    affinity: {}

rabbitmq-topology:
  # -- Enable the `rabbitmq-topology` dependency chart.
  enabled: false

  rabbitmq:
    topology:
      # -- Pass-through defaults for the rabbitmq-topology subchart.
      # Fallback chain in subchart: object field -> these defaults -> template fallback.
      queueDefaults:
        # -- Default value for `queues.<name>.type` in the topology subchart.
        # Final template fallback: `quorum`.
        type: quorum
        # -- Default value for `queues.<name>.durable` in the topology subchart.
        # Final template fallback: `true`.
        durable: true
        # -- Default value for `queues.<name>.autoDelete` in the topology subchart.
        # Final template fallback: `false`.
        autoDelete: false
        # -- Default value for `queues.<name>.vhost` in the topology subchart.
        # Final template fallback: selected default vhost (`/` if none marked default).
        vhost: ""
        exchange:
          # -- Default value for `queues.<name>.exchange.enabled` in the topology subchart.
          # Final template fallback: `true`.
          enabled: true
          # -- Default value for `queues.<name>.exchange.type` in the topology subchart.
          # Final template fallback: `fanout`.
          type: fanout
          # -- Default value for `queues.<name>.exchange.durable` in the topology subchart.
          # Final template fallback: `true`.
          durable: true
          # -- Default value for `queues.<name>.exchange.autoDelete` in the topology subchart.
          # Final template fallback: `false`.
          autoDelete: false
        binding:
          # -- Default value for `queues.<name>.binding.enabled` in the topology subchart.
          # Final template fallback: `true`.
          enabled: true
          # -- Default value for `queues.<name>.binding.destinationType` in the topology subchart.
          # Final template fallback: `queue`.
          destinationType: queue

      exchangeDefaults:
        # -- Default value for `exchanges.<name>.type` in the topology subchart.
        # Final template fallback: `fanout`.
        type: fanout
        # -- Default value for `exchanges.<name>.durable` in the topology subchart.
        # Final template fallback: `true`.
        durable: true
        # -- Default value for `exchanges.<name>.autoDelete` in the topology subchart.
        # Final template fallback: `false`.
        autoDelete: false
        # -- Default value for `exchanges.<name>.vhost` in the topology subchart.
        # Final template fallback: selected default vhost (`/` if none marked default).
        vhost: ""

      bindingDefaults:
        # -- Default value for `bindings.<name>.vhost` in the topology subchart.
        # Final template fallback: selected default vhost (`/` if none marked default).
        vhost: ""
        # -- Default value for `bindings.<name>.destinationType` in the topology subchart.
        # Final template fallback: `queue`.
        destinationType: queue

      policyDefaults:
        # -- Default value for `policies.<name>.vhost` in the topology subchart.
        # Final template fallback: selected default vhost (`/` if none marked default).
        vhost: ""
        # -- Default value for `policies.<name>.priority` in the topology subchart.
        # Final template fallback: `0`.
        priority: 0
        # -- Default value for `policies.<name>.applyTo` in the topology subchart.
        # Final template fallback: required on each policy if empty here.
        applyTo: ""

      # -- Map of queue definitions.
      queues: {}
      # -- Map of exchange definitions.
      exchanges: {}
      # -- Map of binding definitions.
      bindings: {}
      # -- Map of policy definitions.
      policies: {}
      # -- Map of user definitions.
      users: {}

    # -- Map of vhost definitions.
    vhosts: {}
